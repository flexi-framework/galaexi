## Parameter file options \label{sec:parameterfile}

A ``parameter.ini`` file is needed to control the code. An overview of all options in the parameter file can be generated by following command in the terminal:

~~~~~~~
flexi --help
~~~~~~~

Generally following types are used:

~~~~~~~
INTEGER = 1
REAL    = 1.23456
LOGICAL = T         ! True
LOGICAL = F         ! False
STRING  = FLEXI
VECTOR  = (/1.0,2.0,3.0/)
~~~~~~~

The concept of the parameter file is described as followed:

* each single line is saved and examined for specific variable names
* the examination is case-insensitive
* comments can be set with symbol "!" in front of the text

~~~~~~~ {.Fortran}
! commented text
~~~~~~~

* numbers can also be set by using "pi"

~~~~~~~
vector = (/1,2Pi,3Pi/)
~~~~~~~

* the order of defined variables is with one exception generally indifferent, but it is preferable to group similar variables
* the order becomes important only by modifying boundary conditions, if you want to modify a specific boundary by addressing its name, the related boundary type has to be defined

~~~~~~~
BoundaryName=inflow         ! BC_Name defined in mesh file
BoundaryType=(/2,0,0,0/)
BoundaryName=outflow        ! BC_Name defined in mesh file
BoundaryType=(/2,0,0,0/)
~~~~~~~

The following tables describe the main configuration options which can used in the parameter file.

<!---
COMMENT: THIS TABLE CAN BE CREATED WITH flexi --markdown.
-->

## Parameterfile

------------------------------------------------------------------------------------------------
**MPI**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

GroupSize                                   0 Define size of MPI subgroups, used to e.g. perform
                                              grouped IO, where group master
                                              collects and outputs data.

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**IO_HDF5**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

gatheredWrite                               F Set true to activate gathered HDF5 IO for parallel
                                              computations. Only local group masters will write
                                              data after gathering from local slaves.

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**Interpolation**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

N                                             Polynomial degree of computation to represent to
                                              solution

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**Restart**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

ResetTime                                   F Override solution time to t=0 on restart.

NFVRestartSuper                               Polynomial degree for equidistant supersampling of
                                              FV subcells when restartingon a different
                                              polynomial degree. Default 2*MAX(N,NRestart).

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**Output**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

NVisu                                         Polynomial degree at which solution is sampled for
                                              visualization.

NOut                                       -1 Polynomial degree at which solution is written.
                                              -1: NOut=N, >0: NOut

ProjectName                                   Name of the current simulation (mandatory).

Logging                                     F Write log files containing debug output.

ErrorFiles                                  T Write error files containing error output.

OutputFormat                             None File format for visualization: None, Tecplot,
                                              TecplotASCII, ParaView.  Note: Tecplot output is
                                              currently unavailable due to licensing issues.

ASCIIOutputFormat                         CSV File format for ASCII files, e.g. body forces:
                                              CSV, Tecplot.

doPrintStatusLine                           F Print: percentage of time, ...

WriteStateFiles                             T Write HDF5 state files. Disable this only for
                                              debugging issues.
                                              NO SOLUTION WILL BE WRITTEN!

WriteTimeAvgFiles                           T Write HDF5 time average files. Disable this only
                                              for debugging.
                                              NO TIME AVERAGE FILES WILL BE WRITTEN!

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**Mesh**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

MeshFile                                      (relative) path to meshfile (mandatory).

useCurveds                                  T Controls usage of high-order information in mesh.
                                              Turn off to discard high-order data and treat
                                              curved meshes as linear meshes.

interpolateFromTree                         T For non-conforming meshes, built by refinement
                                              from a tree structure, the metrics can be built
                                              from the tree geometry if it is contained in the
                                              mesh. Can improve free-stream preservation.

meshScale                                 1.0 Scale the mesh by this factor (shrink/enlarge).

meshdeform                                  F Apply simple sine-shaped deformation on cartesion
                                              mesh (for testing).

crossProductMetrics                         F Compute mesh metrics using cross product form.
                                              Caution: in this case free-stream preservation is
                                              only guaranteed for N=3*NGeo.

debugmesh                                   0 Output file with visualization and debug
                                              information for the mesh. 0: no visualization, 3:
                                              Paraview binary

BoundaryName                                  Names of boundary conditions to be set (must be
                                              present in the mesh!).For each BoundaryName a
                                              BoundaryType needs to be specified.

BoundaryType                                  Type of boundary conditions to be set. Format:
                                              (BC_TYPE,BC_STATE)

writePartitionInfo                          F Write information about MPI partitions into a
                                              file.

NGeoOverride                               -1 Override switch for NGeo. Interpolate mesh to
                                              different NGeo.<1: off, >0: Interpolate

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**Equation of State**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

UseNonDimensionalEqn                        F Set true to compute R and mu from bulk Mach
                                              Reynolds (nondimensional form.

BulkMach                                      Bulk Mach     (UseNonDimensionEqn=T)

BulkReynolds                                  Bulk Reynolds (UseNonDimensionEqn=T)

kappa                                     1.4 Heat capacity ratio / isentropic exponent

R                                     287.058 Specific gas constant

Pr                                       0.72 Prandtl number

mu0                                       0.0 Dynamic Viscosity

Ts                                      110.4 Sutherland's law for variable viscosity: Ts

Tref                                   273.15 Sutherland's law for variable viscosity: Tref

ExpoSuth                                  1.5 Sutherland's law for variable viscosity: Exponent

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**Equation**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

IniRefState                                   Refstate required for initialization.

RefState                                      State(s) in primitive variables (density, velx,
                                              vely, velz, pressure).

BCStateFile                                   File containing the reference solution on the
                                              boundary to be used as BC.

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**Riemann**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

Riemann                         RoeEntropyFix Riemann solver to be used: LF, HLLC, Roe,
                                              RoeEntropyFix, HLL, HLLE, HLLEM

RiemannBC                                Same Riemann solver used for boundary conditions: Same,
                                              LF, Roe, RoeEntropyFix, HLL, HLLE, HLLEM

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**SplitDG**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

SplitDG                                    PI SplitDG formulation to be used: SD, MO, DU, KG,
                                              PI, CH

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**Exactfunc**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

IniExactFunc                                  Exact function to be used for computing initial
                                              solution.

AdvVel                                        Advection velocity (v1,v2,v3) required for
                                              exactfunction CASE(2,21,4,8)

MachShock                                 1.5 Parameter required for CASE(10)

PreShockDens                              1.0 Parameter required for CASE(10)

IniCenter                                     Shu Vortex CASE(7) (x,y,z)

IniAxis                                       Shu Vortex CASE(7) (x,y,z)

IniAmplitude                              0.2 Shu Vortex CASE(7)

IniHalfwidth                              0.2 Shu Vortex CASE(7)

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**Filter**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

FilterType                               None Type of filter to be applied. None, CutOff, Modal,
                                              LAF

NFilter                                       Cut-off mode (FilterType==CutOff or LAF)

LAF_alpha                                     Relaxation factor for LAF, see Flad et al. JCP
                                              2016

HestFilterParam                               Parameters for Hesthaven filter
                                              (FilterType==Modal)

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**Overintegration**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

OverintegrationType                      none Type of overintegration. None, CutOff, ConsCutOff

NUnder                                        Polynomial degree to which solution is filtered
                                              (OverintegrationType == 1 or 2

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**Indicator**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

IndicatorType                              DG Specify type of indicator to be used: DG, FV,
                                              Persson,Ducros, DucrosTimesJST, halfhalf,
                                              checkerboard

IndVar                                      1 Specify variable upon which indicator is applied,
                                              for general indicators.

IndStartTime                              0.0 Specify physical time when indicator evalution
                                              starts. Before this timea high indicator value is
                                              returned from indicator calculation.(Idea: FV
                                              everywhere at begin of computation to smooth
                                              solution)

nModes                                      2 Number of highest modes to be checked for Persson
                                              modal indicator.

FVBoundaries                                F Use FV discretization in element that contains a
                                              side of a certain BC_TYPE

FVBoundaryType                                BC_TYPE that should be discretized with FV.Set it
                                              to BC_TYPE, setting 0 will apply FV to all BC
                                              Sides

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**FV**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

FV_SwitchConservative                       T Perform FV/DG switch in reference element

FV_IniSupersample                           T Supersample initial solution inside each sub-cell
                                              and take mean value
                                               as average sub-cell value.

FV_IniSharp                                 F Maintain a sharp interface in the initial solution
                                              in the FV region

FV_IndUpperThreshold                          Upper threshold: Element is switched from DG to FV
                                              if indicator
                                              rises above this value

FV_IndLowerThreshold                          Lower threshold: Element is switched from FV to DG
                                              if indicator
                                              falls below this value

FV_toDG_indicator                           F Apply additional Persson indicator to check if DG
                                              solution after switch
                                               from FV to DG is valid.

FV_toDG_limit                                 Threshold for FV_toDG_indicator

FV_toDGinRK                                 F Allow switching of FV elements to DG during Runge
                                              Kutta stages.
                                              This may violated the DG timestep restriction of
                                              the element.

FV_alpha_min                             0.01 Lower bound for alpha (all elements below
                                              threshold are treated as pure DG)

FV_alpha_max                              0.5 Maximum value for alpha

FV_alpha_ExtScale                         0.5 Scaling factor for elpha if extended into
                                              neighboring elements

FV_nExtendAlpha                             1 Number of times alpha should be passed to neighbor
                                              elements per timestep

FV_doExtendAlpha                            F Blending factor is prolongated into neighboring
                                              elements

FV_LimiterType                              1 Type of slope limiter of second order
                                              reconstruction

swebyb                                        beta parameter for Sweby limiter

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**FV_Basis**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

FV_CellType                       equidistant Specify type of FV cell distribution to be used:
                                              equidistant
                                               same
                                               legendre_gauss
                                               legendre_lobatto
                                               chebychev_lobatto

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**Sponge**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

SpongeLayer                                 F Turn on to use sponge regions for reducing
                                              reflections at boundaries.

damping                                   1.0 Damping factor of sponge.
                                              U_t=U_t-damping*(U-U_base) in fully damped
                                              regions.

SpongeShape                                   Set shape of sponge: (1) ramp : cartesian /
                                              vector-aligned, (2)  cylindrical

SpongeDistance                                Length of sponge ramp. The sponge will have
                                              maximum strength at the end of the ramp and after
                                              that point.

xStart                                        Coordinates of start position of sponge ramp
                                              (SpongeShape=ramp) or center
                                              (SpongeShape=cylindrical).

SpongeDir                                     Direction vector of the sponge ramp
                                              (SpongeShape=ramp)

SpongeRadius                                  Radius of the sponge zone
                                              (SpongeShape=cylindrical)

SpongeAxis                                    Axis vector of cylindrical sponge
                                              (SpongeShape=cylindrical)

SpongeViz                                   F Turn on to write a visualization file of sponge
                                              region and strength.

SpongeBaseFlow                              1 Type of baseflow to be used for sponge. (1)
                                              constant: fixed state,(2) exactfunction: exact
                                              function, (3) file: read baseflow file, (4)
                                              pruett: temporally varying, solution adaptive
                                              Pruett baseflow

SpongeRefState                                Index of refstate in ini-file
                                              (SpongeBaseFlow=constant)

SpongeExactFunc                               Index of exactfunction
                                              (SpongeBaseFlow=exactfunction)

SpongeBaseFlowFile                            FLEXI solution (e.g. TimeAvg) file from which
                                              baseflow is read.

tempFilterWidth                               Temporal filter width used to advance Pruett
                                              baseflow in time.)

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**TimeDisc**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

TimeDiscMethod                 CarpenterRK4-5 Specifies the type of time-discretization to be
                                              used, e.g. the name of a specific Runge-Kutta
                                              scheme. Possible values:
                                                * standardrk3-3
                                                * carpenterrk4-5
                                                * niegemannrk4-14
                                                * toulorgerk4-8c
                                                * toulorgerk3-7c
                                                * toulorgerk4-8f
                                                * ketchesonrk4-20
                                                * ketchesonrk4-18
                                                * eulerimplicit
                                                * cranknicolson2-2
                                                * esdirk2-3
                                                * esdirk3-4
                                                * esdirk4-6

TEnd                                          End time of the simulation (mandatory).

TStart                                    0.0 Start time of the simulation (optional, conflicts
                                              with restart).

CFLScale                                      Scaling factor for the theoretical CFL number,
                                              typical range 0.1..1.0 (mandatory)

DFLScale                                      Scaling factor for the theoretical DFL number,
                                              typical range 0.1..1.0 (mandatory)

dtmin                                    -1.0 Minimal allowed timestep (optional)

dtkill                                   -1.0 Kill FLEXI if dt gets below this value (optional)

maxIter                                    -1 Stop simulation when specified number of timesteps
                                              has been performed.

NCalcTimeStepMax                            1 Compute dt at least after every Nth timestep.

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**Implicit**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

adaptepsNewton                              F Adaptive Newton eps by Runge-Kutta error
                                              estimation

EpsNewton                             0.1E-02 Newton tolerance, only used if adaptepsNewton=F

nNewtonIter                                50 Maximum amount of Newton iterations

EisenstatWalker                             F Adaptive abort criterion for GMRES

gammaEW                                   0.9 Parameter for Eisenstat Walker adaptation

EpsGMRES                              0.1E-02 GMRES Tolerance, only used of EisenstatWalker=F

nRestarts                                  10 Maximum number of GMRES Restarts

nKDim                                      30 Maximum number of Krylov subspaces for GMRES,
                                              after that a restart is performed

Eps_Method                                  2 Method of determining the step size of FD
                                              approximation of A*v in GMRES, 1:
                                              sqrt(machineAccuracy)*scaleps, 2: take norm of
                                              solution into account

scaleps                                   1.0 Scaling factor for step size in FD, mainly used in
                                              Eps_Method=1

FD_Order                                    1 Order of FD approximation (1/2)

PredictorType                               0 Type of predictor to be used, 0: use current U, 1:
                                              use right hand side, 2: polynomial extrapolation,
                                              3: dense output formula of RK scheme

PredictorOrder                              0 Order of predictor to be used (PredictorType=2)

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**Preconditioner**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

PrecondType                                 1 Preconditioner Type (0: no Preconditioner, 1:
                                              analytic, 2: finite difference, 3: compute both
                                              and compare)

PrecondIter                                 1 Defines how often preconditioner is built

SolveSystem                                 1 Solver of the preconditioned system (0: exact LU
                                              inversion, 1: inexact ILU(0) inversion, always
                                              with NoFillIn=T)

DebugMatrix                                 0 Write Jacobians to file for debug purposes (0: no
                                              output, 1: non-inverted matrix,2: additionally
                                              inverted matrix, 3: additionally check inversion
                                              accuracy)

HyperbolicPrecond                           F Preconditioner only for the hyperbolic flux

DoDisplayPrecond                            F Display building time of preconditioner

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**Analyze**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

CalcErrorNorms                              T Set true to compute L2 and LInf error norms at
                                              analyze step.

AnalyzeToFile                               F Set true to output result of error norms to a file
                                              (CalcErrorNorms=T)

analyze_dt                                0.0 Specifies time intervall at which analysis
                                              routines are called.

nWriteData                                  1 Intervall as multiple of analyze_dt at which HDF5
                                              files (e.g. State,TimeAvg,Fluc) are written.

NAnalyze                                      Polynomial degree at which analysis is performed
                                              (e.g. for L2 errors). Default: 2*N.

AnalyzeExactFunc                              Define exact function used for analyze (e.g. for
                                              computing L2 errors). Default: Same as
                                              IniExactFunc

AnalyzeRefState                               Define state used for analyze (e.g. for computing
                                              L2 errors). Default: Same as IniRefState

doMeasureFlops                              T Set true to measure flop count, if compiled with
                                              PAPI.

PIDkill                                  -1.0 Kill FLEXI if PID gets below this value (optional)

NCalcPID                                    1 Compute PID after every Nth timestep.

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**AnalyzeEquation**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

CalcBodyForces                              F Set true to compute body forces at walls

CalcBulkState                               F Set true to compute the flows bulk quantities

CalcMeanFlux                                F Set true to compute mean flux through boundaries

CalcWallVelocity                            F Set true to compute velocities at wall boundaries

CalcTotalStates                             F Set true to compute total states (e.g. Tt,pt)

CalcTimeAverage                             F Set true to compute time averages

WriteBodyForces                             T Set true to write bodyforces to file

WriteBulkState                              T Set true to write bulk state to file

WriteMeanFlux                               T Set true to write mean flux to file

WriteWallVelocity                           T Set true to write wall velolcities file

WriteTotalStates                            T Set true to write total states to file

VarNameAvg                                    Names of variables to be time-averaged

VarNameFluc                                   Names of variables for which Flucs (time-averaged
                                              square of the variable) should be computed.
                                              Required for computing actual fluctuations.

------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
**RecordPoints**
----------------------- --------------------- --------------------------------------------------
**Variable**            **Default**           **Description**

RP_inUse                                    F Set true to compute solution history at points
                                              defined in recordpoints file.

RP_DefFile                                    File containing element-local parametric
                                              recordpoint coordinates and structure.

RP_MaxMemory                              100 Maximum memory in MiB to be used for storing
                                              recordpoint state history. If memory is exceeded
                                              before regular IO level states are written to
                                              file.

RP_SamplingOffset                           1 Multiple of timestep at which recordpoints are
                                              evaluated.
------------------------------------------------------------------------------------------------
